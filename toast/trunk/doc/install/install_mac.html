<!DOCTYPE doctype PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="Author" content="Martin Schweiger">
<title>Toast++ Mac installation</title>
<link rel="stylesheet" href="../toastdoc.css" type="TEXT/CSS">
</head>

<body>
<div class="menu">
<p><a href="install.html">Toast++ Installation Guide</a> &gt; Mac installation</p></div>

<h1>Toast++ Mac installation</h1>

<h2>Preliminaries</h2>
<p>At present only the new matlab2 interface to toast is supported on Mac OS X.</p>
<p>The following build tools are required for compilation (tested under OS X 10.10 Yosemite):</p>
<ul>
<li>Xcode (tested version 6.1.1) from the Mac App Store,</li>
<li>gfortran (tested gfortran-mp-4.8) from MacPorts.</li>
</ul>

<h2>Building the numerics libraries</h2>
<p>Open a terminal window and chage to the directory where you have placed the
toast sources. Then set the TOASTDIR environment variable:</p>
<p class="code">export TOASTDIR=$PWD</p>
<p>Configure the makefiles with</p>
<p class="code">./configure F77=gfortran-mp-4.8 --disable-arpack-shared --disable-blas-shared --disable-lapack-shared SUPERLU_LOCAL_STATIC=1</p>
<p>to perform a static link against the fortran runtime.</p>
<p>Once configuration completes create a dummy malloc header,</p>
<p class="code">touch malloc.h</p>
<p>and set the toast environment variables:</p>
<p class="code">source toastenv.sh</p>
<p>The numerics libaries can now be built:</p>
<p class="code">make numerics</p>

<h2>Building the requisite toast libraries and matlab2 interface</h2>
<p>Load the toastpp Xcode workspace located in the mac subdirectory of the
source tree.</p>
<p>Enter the Build Settings tab for the matlab2 target and change the MATLABAPP
setting under the 'User Defined' subsection to the version of MATLAB against
which you wish to compile.</p>
<p>Build with Command-B</p>
<p>Finally, you need to add the search paths for the mex files and matlab scripts. Launch Matlab from the toast main directory, and type</p>
<p class="code">mtoast2_install</p>

<h2>Note</h2>
<p>Since Mathworks presently supports only gfortran 4.3 under Mac OS X, and overrides the use of external libc and libgfortran runtimes, the current version of toast is statically linked against the runtimes provided by MacPorts. This is sub-optimal, but cannot be changed until Mathworks supports a more recent version of gfortran.</p>

</body>
</html>
